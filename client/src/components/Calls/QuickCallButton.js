import React, { useState } from 'react';\nimport {\n  IconButton,\n  Menu,\n  MenuItem,\n  ListItemIcon,\n  ListItemText,\n  Tooltip\n} from '@mui/material';\nimport {\n  Call,\n  Videocam,\n  MoreVert\n} from '@mui/icons-material';\nimport { useAgora } from '../../contexts/AgoraContext';\n\nconst QuickCallButton = ({ \n  userId, \n  userName,\n  variant = 'icon', // 'icon' or 'menu'\n  disabled = false,\n  onCallStart\n}) => {\n  const { startCall, isCallActive } = useAgora();\n  const [anchorEl, setAnchorEl] = useState(null);\n  const open = Boolean(anchorEl);\n\n  const handleMenuOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleCall = async (isVideo = false) => {\n    try {\n      await startCall(userId, isVideo);\n      onCallStart && onCallStart({ userId, isVideo });\n      handleMenuClose();\n    } catch (error) {\n      console.error('Error starting call:', error);\n    }\n  };\n\n  if (variant === 'menu') {\n    return (\n      <>\n        <IconButton\n          onClick={handleMenuOpen}\n          disabled={disabled || isCallActive}\n          size=\"small\"\n        >\n          <MoreVert />\n        </IconButton>\n        \n        <Menu\n          anchorEl={anchorEl}\n          open={open}\n          onClose={handleMenuClose}\n          PaperProps={{\n            sx: { minWidth: 160 }\n          }}\n        >\n          <MenuItem onClick={() => handleCall(false)}>\n            <ListItemIcon>\n              <Call fontSize=\"small\" />\n            </ListItemIcon>\n            <ListItemText>অডিও কল</ListItemText>\n          </MenuItem>\n          \n          <MenuItem onClick={() => handleCall(true)}>\n            <ListItemIcon>\n              <Videocam fontSize=\"small\" />\n            </ListItemIcon>\n            <ListItemText>ভিডিও কল</ListItemText>\n          </MenuItem>\n        </Menu>\n      </>\n    );\n  }\n\n  // Default icon variant\n  return (\n    <>\n      <Tooltip title=\"অডিও কল\">\n        <IconButton\n          onClick={() => handleCall(false)}\n          disabled={disabled || isCallActive}\n          color=\"primary\"\n          size=\"small\"\n        >\n          <Call />\n        </IconButton>\n      </Tooltip>\n      \n      <Tooltip title=\"ভিডিও কল\">\n        <IconButton\n          onClick={() => handleCall(true)}\n          disabled={disabled || isCallActive}\n          color=\"secondary\"\n          size=\"small\"\n        >\n          <Videocam />\n        </IconButton>\n      </Tooltip>\n    </>\n  );\n};\n\nexport default QuickCallButton;